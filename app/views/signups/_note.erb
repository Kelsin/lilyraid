<% signup = note %>
<% hide_stats ||= false %>
<%= render(:partial => "shared/character",
           :object => signup.character) %><%= " (preferred)" if signup.preferred? %><br />
<% if signup.no_show != 'Showed Up' %>
<b>No Show</b>: <%= signup.no_show %><br />
<% end %>
<b>Account</b>: <%= signup.character.account.name %><br />
<b>Level</b>: <%= signup.character.level %><br />
<% if signup.character.guild %>
  <b>Guild</b>: <%= signup.character.guild %><br />
<% end %>
<% if !signup.note.empty? %>
  <%= "<b>Note</b>: #{signup.note}" %><br />
<% end %>
<% if signup.roles.length > 0 %>
  <b>Roles</b>: <%= signup.roles.map { |role| role.name }.join ", " %><br />
<% end %>
<%= signup.date.to_s(:raid) %>
<% if @current_account.admin? and !hide_stats %>
  <br /><br />
  <b>Signup Stats</b>
  <dl>
    <% counts = signup.character.account.signup_stats
       [counts[:seated], counts[:signed], counts[:not_signed], counts[:raids]].each do |numbers| %>
      <dt><%= numbers[:title] %></dt>
      <dd><%= numbers['30'] %> <span>1m</span></dd>
      <dd><%= numbers['90'] %> <span>3m</span></dd>
    <% end %>
  </dl>
  <br />
  <b>No-Show Data</b>
  <dl>
    <% signup.character.account.no_shows.each do |status, numbers| %>
      <dt><%= status %></dt>
      <dd><%= numbers['30'] %> <span>1m</span></dd>
      <dd><%= numbers['90'] %> <span>3m</span></dd>
    <% end %>
  </dl>
<% end %>
